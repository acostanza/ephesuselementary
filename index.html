<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="resources/favicon.ico">
    <title>Ephesus Elementary School</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            background: #f5f5f5;
            padding-top: 150px;
        }

        /* Hero Section - Compact Banner */
        .hero {
            background: linear-gradient(135deg, #e6031b 0%, #b8020f 100%);
            background-color: #e6031b;
            color: white;
            padding: 16px 20px 16px 170px;
            text-align: left;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            width: 100%;
            height: 150px;
            min-height: 150px;
            box-sizing: border-box;
        }
        
        .content-section:first-of-type {
            margin-top: 0px;
        }

        .hero h1 { font-size: 2.8rem; margin-bottom: 15px; font-weight: 700; }
        .hero .description { font-size: 1.05rem; max-width: 800px; opacity: 0.95; line-height: 1.7; }

        /* Floating Navigation */
        .floating-nav {
            position: fixed;
            left: 40px;
            top: 210px;
            z-index: 10000;
            width: 200px;
        }

        .nav-item {
            position: relative;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item:last-child {
            margin-bottom: 0;
        }

        .nav-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ddd;
            border: 3px solid #e6031b;
            position: absolute;
            left: 0;
            top: 0;
            transition: all 0.3s ease;
            z-index: 2;
        }

        .nav-item.active .nav-dot {
            background: #e6031b;
            transform: scale(1.3);
        }

        .nav-label {
            padding-left: 35px;
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-item.active .nav-label {
            color: #e6031b;
            font-weight: 700;
        }

        .nav-item:hover .nav-label {
            color: #e6031b;
        }

        /* Path line connecting dots - exclude last nav item (smart-solution) */
        .nav-item:not([data-section="smart-solution"])::after {
            content: '';
            position: absolute;
            left: 9px;
            top: 20px;
            width: 2px;
            height: calc(100% + 10px);
            background: repeating-linear-gradient(
                to bottom,
                #e6031b 0px,
                #e6031b 8px,
                transparent 8px,
                transparent 16px
            );
            z-index: 1;
        }

        /* Sidebar Photo */
        .sidebar-photo {
            margin-top: 5px;
            width: 100%;
        }
        
        .sidebar-photo img {
            width: 125%;
            height: auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        /* Sidebar Buttons */
        .sidebar-buttons {
            position: fixed;
            left: 40px;
            bottom: 0;
            width: 200px;
            display: flex;
            flex-direction: row;
            gap: 8px;
            z-index: 10001;
        }
        
        .sidebar-button {
            background: white;
            color: #e6031b;
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            text-decoration: none;
            text-align: center;
            font-weight: 600;
            font-size: 0.7425rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex: 1;
        }
        
        .sidebar-button:hover {
            background: #e6031b;
            color: white;
            box-shadow: 0 4px 15px rgba(230, 3, 27, 0.3);
            transform: translateY(-2px);
        }

        /* Content Sections */
        .content-section {
            padding: 60px 80px 60px 320px;
            background: transparent;
            position: relative;
            z-index: 1;
        }

        .section-card {
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: -40px; /* Controls the vertical spacing between content boxes (1, 2, 3, 4, 5) on desktop/larger screens */
            border: 1px solid #e0e0e0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(230, 3, 27, 0.15);
        }

        /* Alternating subtle background colors */
        .content-section:nth-child(3) .section-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%);
        }

        .content-section:nth-child(4) .section-card {
            background: linear-gradient(135deg, #fef9f9 0%, #ffffff 100%);
        }

        .content-section:nth-child(5) .section-card {
            background: linear-gradient(135deg, #ffffff 0%, #f5f8fa 100%);
        }

        .content-section:nth-child(6) .section-card {
            background: linear-gradient(135deg, #fef9f9 0%, #ffffff 100%);
        }

        .content-section:nth-child(7) .section-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9faf9 100%);
        }

        .content-section h2 {
            font-size: 2.5rem;
            color: #e6031b;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .content-section .section-number {
            display: inline-block;
            width: 50px;
            height: 50px;
            background: #e6031b;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 800px;
            color: #555;
            margin-bottom: 20px;
        }

        .highlight-box {
            background: #fef9f9;
            border-left: 5px solid #e6031b;
            padding: 25px 30px;
            margin-top: 30px;
            border-radius: 10px;
            max-width: 800px;
            border: 1px solid #ffe0e0;
        }

        .highlight-box h3 {
            color: #e6031b;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .highlight-box ul {
            list-style: none;
            padding-left: 0;
        }

        .highlight-box li {
            padding: 8px 0 8px 30px;
            position: relative;
            color: #555;
        }

        .highlight-box li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #e6031b;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Call to Action Card */
        .cta-card {
            background: linear-gradient(135deg, #e6031b 0%, #b8020f 100%) !important;
            color: white;
            text-align: center;
        }
        
        .cta-card h2 {
            color: white !important;
        }
        
        .cta-card p {
            color: white !important;
            opacity: 0.95;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .cta-card a {
            color: white;
            text-decoration: underline;
            font-weight: 600;
        }
        
        .cta-card a:hover {
            opacity: 0.8;
        }

        /* Stats Display */
        .stats {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: #e6031b;
            color: white;
            padding: 30px;
            border-radius: 10px;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(230, 3, 27, 0.3);
        }

        .stat-card-minority {
            background: #f5c518;
            color: #333;
        }

        .stat-card-learn {
            background: #6d1f19;
            color: white;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            display: block;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Section Divider */
        .section-divider {
            height: 2px;
            background: linear-gradient(to right, transparent, #e6031b, transparent);
            margin: 0 auto 40px auto;
            max-width: 300px;
            opacity: 0.3;
        }

        /* School Logo */
        .school-logo {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10001;
            width: 120px;
            height: auto;
            background: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            transition: transform 0.3s ease;
        }

        .school-logo:hover {
            transform: scale(1.05);
        }

        .school-logo img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.15);
            z-index: 1500;
            padding: 10px 5px;
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap: 5px;
        }

        .mobile-nav-item {
            flex: 1;
            text-align: center;
            padding: 8px 5px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.3s ease;
            font-size: 0.75rem;
            color: #666;
            font-weight: 500;
        }

        .mobile-nav-item.active {
            background: #fef9f9;
            color: #e6031b;
            font-weight: 700;
        }

        .mobile-nav-item:hover {
            background: #f8f9fa;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .floating-nav {
                display: none;
            }
            
            .sidebar-buttons {
                position: fixed;
                top: 148px;
                bottom: auto;
                left: auto;
                right: 10px;
                width: auto;
                flex-direction: row;
                gap: 6px;
                z-index: 10002;
            }
            .sidebar-button {
                padding: 5px 10px;
                font-size: 0.65rem;
            }

            .mobile-nav {
                display: block;
            }

            .school-logo {
                width: 70px;
                top: 10px;
                left: 10px;
                padding: 6px;
            }

            .hero {
                padding: 20px 15px 5px 100px;
                height: 160px;
                min-height: 160px;
                max-height: 160px;
                box-sizing: border-box;
                overflow: hidden;
            }
            .hero .description {
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .content-section:first-of-type {
                margin-top: 174px;
            }

            .content-section {
                padding-left: 20px;
                padding-right: 20px;
            }

            .content-section {
                padding-bottom: -40x; /* Controls the vertical spacing between content boxes (1, 2, 3, 4, 5) on mobile/narrow screens */
            }

            .section-card {
                padding: 25px 20px;
            }

            .hero h1 { font-size: 1.8rem; }
            .hero .description { font-size: 0.9rem; }

            .content-section h2 {
                font-size: 1.6rem;
            }

            .content-section p {
                font-size: 1rem;
            }

            .stats {
                flex-direction: column;
            }

            .stat-card {
                width: 100%;
            }

            .popup-notification {
                bottom: 80px;
                width: calc(100% - 20px);
                left: 10px;
                right: 10px;
                padding: 20px;
            }

            .popup-heading {
                font-size: 1.2rem;
            }

            .popup-text {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .school-logo {
                width: 50px;
                top: 8px;
                left: 8px;
                padding: 5px;
            }

            .sidebar-buttons {
                top: 128px;
            }

            .hero {
                padding: 15px 10px 5px 80px;
                height: 140px;
                min-height: 140px;
                max-height: 140px;
            }

            .content-section:first-of-type {
                margin-top: 154px;
            }

            .hero h1 { font-size: 1.5rem; }

            .content-section h2 {
                font-size: 1.4rem;
            }

            .section-card {
                padding: 20px 15px;
            }

            .mobile-nav-item {
                font-size: 0.7rem;
                padding: 6px 3px;
            }
        }

        /* Popup Notification */
        .popup-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 380px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(230, 3, 27, 0.25);
            padding: 30px;
            z-index: 3000;
            border: 2px solid #e6031b;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .popup-notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .popup-notification.hide {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .popup-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: #e6031b;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .popup-close:hover {
            background: #b8020f;
            transform: scale(1.1);
        }

        .popup-heading {
            color: #e6031b;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding-right: 20px;
            line-height: 1.3;
        }

        .popup-text {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 0;
        }

        .popup-text a {
            color: #e6031b;
            text-decoration: underline;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .popup-text a:hover {
            color: #b8020f;
        }

        @media (max-width: 480px) {
            .popup-notification {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Compact Growth Chart Styles */
        .growth-chart-container {
            background: #ffffff;
            padding: 15px 20px 20px 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 550px;
            margin: 30px 0;
            border-radius: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }

        .growth-chart-header {
            text-align: left;
            margin-bottom: 10px;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeUpChart 0.6s ease-out forwards;
        }

        .growth-chart-subtitle {
            color: #b62d22;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 0;
            font-weight: 600;
        }

        .growth-chart-title {
            color: #1a1a1a;
            font-size: 22px;
            font-weight: 700;
            display: none;
        }

        .growth-chart-rows {
            display: flex;
            flex-direction: column;
            gap: 0px;
        }

        .growth-chart-row {
            display: grid;
            grid-template-columns: 120px 1fr 45px;
            align-items: center;
            gap: 10px;
            padding: 0px 10px;
            margin-bottom: -1px;
            border-radius: 0px;
            border: none;
            opacity: 0;
            transform: translateY(10px);
        }

        .growth-chart-row.top {
            background: linear-gradient(135deg, rgba(182, 45, 34, 0.08) 0%, rgba(182, 45, 34, 0.03) 100%);
            border: none;
        }

        .growth-school-name {
            font-size: 1rem;
            color: #555;
            font-weight: 500;
            line-height: 1.2;
        }

        .growth-chart-row.top .growth-school-name {
            color: #b62d22;
            font-weight: 700;
        }

        .growth-bar-bg {
            height: 14px;
            background: rgba(0,0,0,0.06);
            border-radius: 3px;
            overflow: hidden;
        }

        .growth-bar-fill {
            height: 100%;
            border-radius: 3px;
            transform: scaleX(0);
            transform-origin: left;
            background: linear-gradient(90deg, #9ca3af 0%, #d1d5db 100%);
        }

        .growth-chart-row.top .growth-bar-fill {
            background: linear-gradient(90deg, #b62d22, #d44535, #b62d22);
            background-size: 200% 100%;
            box-shadow: 0 0 10px rgba(182, 45, 34, 0.3);
        }

        .growth-score {
            font-size: 1rem;
            font-weight: 700;
            text-align: right;
            color: #333;
            line-height: 1.2;
        }

        .growth-chart-row.top .growth-score {
            font-size: 1.1rem;
            color: #b62d22;
        }

        .growth-chart-footer {
            margin-top: 16px;
            text-align: center;
            opacity: 0;
        }

        .growth-chart-footer p {
            color: rgba(0,0,0,0.4);
            font-size: 11px;
        }

        @keyframes fadeUpChart {
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInBar {
            to { transform: scaleX(1); }
        }

        @keyframes shimmerBar {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        .growth-chart-row.top .growth-bar-fill.animated {
            animation: shimmerBar 3s linear infinite;
        }

        /* Housing Development Graphic Styles */
        .housing-graphic {
            margin: 40px 0;
        }

        .housing-graphic .main-row {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 40px;
            flex-wrap: wrap;
        }

        .housing-graphic .stat-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end;
        }

        .housing-graphic .stat-column.left {
            align-items: flex-end;
        }

        .housing-graphic .stat-column.right {
            align-items: flex-start;
        }

        .housing-graphic .stat-pill {
            padding: 14px 22px;
            border-radius: 50px;
            text-align: center;
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .housing-graphic .stat-pill.affordable {
            background: #D32027;
            color: #fff;
            animation: slideFromLeft 0.5s ease-out 1.8s forwards;
        }

        .housing-graphic .stat-pill.units {
            background: linear-gradient(135deg, #F5C518 0%, #E8B708 100%);
            color: #333;
            animation: slideFromRight 0.5s ease-out 2s forwards;
            width: 158px;
            height: 158px;
            border-radius: 12px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .housing-graphic .stat-pill-number {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 28px;
            font-weight: 700;
            line-height: 1;
        }

        .housing-graphic .stat-pill.units .stat-pill-number {
            font-size: 54px;
            margin-bottom: 10px;
        }

        .housing-graphic .stat-pill-label {
            font-size: 12px;
            font-weight: 600;
            line-height: 1.2;
            text-align: left;
        }

        .housing-graphic .stat-pill.units .stat-pill-label {
            font-size: 14px;
            text-align: center;
        }

        .housing-graphic .affordable-tag {
            background: #4CAF50;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-left: 8px;
            text-transform: uppercase;
        }

        .housing-graphic .chart-container {
            position: relative;
            opacity: 0;
            animation: scaleIn 0.6s ease-out 0.3s forwards;
        }

        .housing-graphic .chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .housing-graphic .chart-center-number {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 48px;
            color: #2D2D2D;
            line-height: 1;
            font-weight: 700;
        }

        .housing-graphic .chart-center-label {
            font-size: 13px;
            color: #888;
            margin-top: 2px;
        }

        .housing-graphic .legend {
            display: flex;
            justify-content: flex-start;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .housing-graphic .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
        }

        .housing-graphic .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .housing-graphic .legend-text {
            font-size: 13px;
            color: #555;
        }

        .housing-graphic .legend-text strong {
            color: #2D2D2D;
        }

        .housing-graphic .planned-tag {
            font-size: 9px;
            font-weight: 700;
            color: #B8860B;
            background: #FFF8E7;
            padding: 2px 6px;
            border-radius: 8px;
            margin-left: 4px;
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes slideFromLeft {
            from { opacity: 0; transform: translateX(-25px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideFromRight {
            from { opacity: 0; transform: translateX(25px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 750px) {
            .housing-graphic .main-row {
                flex-direction: column;
            }
            .housing-graphic .stat-column {
                flex-direction: row;
                align-items: center !important;
            }
        }
    </style>
</head>
<body>
    <!-- School Logo - Fixed Position -->
    <div class="school-logo">
        <img src="resources/ephesus-logo.png" alt="Ephesus Elementary School Logo">
    </div>

    <!-- Popup Notification -->
    <div class="popup-notification" id="emailPopup">
        <button class="popup-close" id="closePopup" aria-label="Close notification">×</button>
        <h3 class="popup-heading">Did you Email the School Board Yet?</h3>
        <p class="popup-text">
            Tell local leaders why Ephesus Elementary is important to <strong>YOU</strong>, and why investing in Ephesus is important! Need ideas? See our <a href="conversations.html">conversations page</a>.
        </p>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <h1>Ephesus Elementary</h1>
        <div class="description">A Walkable School, Welcoming to All</div>
    </section>

    <!-- Floating Navigation -->
    <nav class="floating-nav">
        <div class="nav-item active" data-section="walkability">
            <div class="nav-dot"></div>
            <div class="nav-label">Walkability</div>
        </div>
        <div class="nav-item" data-section="supporting-students">
            <div class="nav-dot"></div>
            <div class="nav-label">Supporting Students</div>
        </div>
        <div class="nav-item" data-section="academic-growth">
            <div class="nav-dot"></div>
            <div class="nav-label">Academic Growth</div>
        </div>
        <div class="nav-item" data-section="strategic-location">
            <div class="nav-dot"></div>
            <div class="nav-label">Strategic Location</div>
        </div>
        <div class="nav-item" data-section="smart-solution">
            <div class="nav-dot"></div>
            <div class="nav-label">Smart Solution</div>
        </div>
        <div class="sidebar-photo">
            <img src="resources/ephesus_alert.jpg" alt="Ephesus Elementary School Community" loading="lazy">
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <div class="mobile-nav-items">
            <div class="mobile-nav-item active" data-section="walkability">Walk</div>
            <div class="mobile-nav-item" data-section="supporting-students">Students</div>
            <div class="mobile-nav-item" data-section="academic-growth">Academic</div>
            <div class="mobile-nav-item" data-section="strategic-location">Location</div>
            <div class="mobile-nav-item" data-section="smart-solution">Solution</div>
        </div>
    </nav>

    <!-- Sidebar Buttons -->
    <div class="sidebar-buttons">
        <a href="index.html" class="sidebar-button">Home</a>
        <a href="conversations.html" class="sidebar-button">Conversations</a>
        <a href="resources.html" class="sidebar-button">Resources</a>
    </div>

    <!-- Section 1: Walkability -->
    <section class="content-section" id="walkability">
        <div class="section-card">
            <div class="section-number">1</div>
            <h2>A Walking School in a Walkable Community</h2>
            <p>
                Ephesus Elementary is located at the heart of east Chapel Hill, making it easily accessible for families nearby. This central location means fewer students need to be bused to school, reducing transportation costs and environmental impact, and strengthening community connections.
            </p>
            <div class="highlight-box">
                <h3>Benefits of Our Central Location</h3>
                <ul>
                    <li>99 students live within half-mile walking distance (highest in the CHCCS district)</li>
                    <li>80 students (20%) walk or bike daily (2<sup>nd</sup> highest in the district)</li>
                    <li>Many teachers and staff live in the neighborhood</li>
                </ul>
                <p style="margin-top: 1rem;">Resource: <a href="https://engage.chapelhillnc.gov/27005/widgets/102435/documents/72423"  target="_blank" rel="noopener noreferrer" style="color: #e6031b; text-decoration: underline; font-weight: 600;">Safe Routes to School Action Plan 2025</a></p>
            </div>
        </div>
    </section>

    <!-- Section 2: Supporting Students -->
    <section class="content-section" id="supporting-students">
        <div class="section-card">
            <div class="section-number">2</div>
            <h2>Essential Support for All Students</h2>
            <p>
                We're committed to cultivating a community where all students are welcome. As a Title 1 school, Ephesus Elementary receives federal funding to support students from low-income families, ensuring every child has access to the resources they need to be successful.
            </p>
            <div class="stats">
                <div class="stat-card">
                    <span class="stat-number" id="stat-38" data-target="38">0%</span>
                    <span class="stat-label">Free/Reduced Lunch</span>
                </div>
                <div class="stat-card stat-card-minority">
                    <span class="stat-number" id="stat-50" data-target="50">0%</span>
                    <span class="stat-label">Minority Enrollment</span>
                </div>
                <div class="stat-card stat-card-learn">
                    <span class="stat-number" id="stat-98" data-target="98">0%</span>
                    <span class="stat-label">Say Ephesus is a good place to learn</span>
                </div>
            </div>
            <div class="highlight-box">
                <h3>Highlights</h3>
                <ul>
                    <li>Highest number of Pre-K classrooms in district (NC Pre-K + Head Start)</li>
                    <li>2 of 3 district EC Pre-K teachers are at Ephesus</li>
                    <li>High linguistic diversity: Russian, Mandarin, Burmese, Spanish, Karen</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Section 3: Academic Growth -->
    <section class="content-section" id="academic-growth">
        <div class="section-card">
            <div class="section-number">3</div>
            <h2>#1 in Academic Growth District-Wide</h2>
            <p>
                We've had the strongest student academic growth of any school in the district, showing that students of many backgrounds can thrive at Ephesus.
            </p>
            
            <div class="growth-chart-container">
                <div class="growth-chart-header">
                    <p class="growth-chart-subtitle">Academic Growth Scores 2024-25</p>
                </div>
                <div class="growth-chart-rows" id="growthChartRows"></div>
            </div>
            
            <div class="highlight-box">
                <h3>Key Points:</h3>
                <ul>
                    <li>90.2 growth score — highest in Chapel Hill-Carrboro (2024-25)</li>
                    <li>Met or exceeded growth in every demographic category</li>
                    <li>Exceeded growth in math; narrowly missed in reading (by 0.02)</li>
                    <li>3-year high in students with disabilities showing proficiency on grade level assessments (EOGs)</li>
                </ul>
                <p style="margin-top: 1rem;">Resource: <a href="https://ncreports.ondemand.sas.com/src/" target="_blank" rel="noopener noreferrer" style="color: #e6031b; text-decoration: underline; font-weight: 600;">North Carolina School Report Cards</a></p>
            </div>
        </div>
    </section>

    <!-- Section 4: Strategic Location -->
    <section class="content-section" id="strategic-location">
        <div class="section-card">
            <div class="section-number">4</div>
            <h2>Strategic Location for Chapel Hill's Future</h2>
            <p>
                Ephesus sits near new and planned development including several affordable housing developments, serving families from all backgrounds. Our location offers better traffic distribution than the Estes corridor and has unused open space for campus expansion when needed. This strategic location helps working parents stay connected to their kids' education and keeps our community together.
            </p>
            
            <div class="housing-graphic">
                <div class="main-row">
                    <div class="chart-container">
                        <svg id="housing-donut" width="280" height="280"></svg>
                        <div class="chart-center">
                            <div class="chart-center-number" id="housing-centerNumber">0</div>
                            <div class="chart-center-label">Total new and planned housing units</div>
                        </div>
                    </div>
                    
                    <div class="stat-column right">
                        <div class="stat-pill units">
                            <div class="stat-pill-number">197</div>
                            <div class="stat-pill-label">Affordable<br>Units</div>
                        </div>
                    </div>
                </div>
                
                <div class="legend" id="housing-legend"></div>
            </div>

            <div class="highlight-box">
                <h3>Highlights</h3>
                <ul>
                    <li>Surrounded by high-density, mixed-use zoning</li>
                    <li>Multiple affordable housing developments nearby</li>
                    <li>Better traffic distribution than Estes corridor</li>
                    <li>Unused open space available for campus expansion</li>
                </ul>
                <p style="margin-top: 1rem;">Resource: <a href="https://opendata-townofchapelhill.hub.arcgis.com/documents/chapel-hill-zoning-map/about" target="_blank" rel="noopener noreferrer" style="color: #e6031b; text-decoration: underline; font-weight: 600;">Town of Chapel Hill Zoning Map</a></p>
            </div>
        </div>
    </section>

    <!-- Section 5: Smart Solution -->
    <section class="content-section" id="smart-solution">
        <div class="section-card">
            <div class="section-number">5</div>
            <h2>Ephesus Is a Solution for the Future</h2>
            <p>Ephesus is a walkable school that is welcoming to all in our community and nurtures success for all students.</p>
            <div class="highlight-box">
                <h3>A future with Ephesus means:</h3>
                <ul>
                    <li>Strong Title I intervention support for at-risk students</li>
                    <li>Maintaining walkability and fewer buses, saving money compared to potential redistricting</li>
                    <li>A hub for EC Pre-K teachers and students</li>
                    <li>Promoting strong community ties and consolidating specialized programs</li>
                    <li>Room to grow in its current location: ample open space on campus to build and unused classroom space</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="content-section">
        <div class="section-card cta-card">
            <h2>Ephesus Elementary Needs Your Support!</h2>
            <p>Go to our <a href="conversations.html">Conversations page</a> to find out how to tell local leaders why Ephesus Elementary is important to you!</p>
        </div>
    </section>

    <script>
        // 50% stat count-up animation when Title 1 section reaches halfway up viewport
        (function() {
            const statEl = document.getElementById('stat-50');
            const section = document.getElementById('supporting-students');
            if (!statEl || !section) return;

            let animated = false;
            const target = 50;
            const duration = 2250;

            function checkAndAnimate() {
                if (animated) return;
                const rect = section.getBoundingClientRect();
                const viewportMid = window.innerHeight / 2;
                if (rect.top <= viewportMid) {
                    animated = true;
                    let start = null;
                    function step(timestamp) {
                        if (!start) start = timestamp;
                        const elapsed = timestamp - start;
                        const progress = Math.min(elapsed / duration, 1);
                        const easeOut = 1 - Math.pow(1 - progress, 2);
                        const value = Math.round(easeOut * target);
                        statEl.textContent = value + '%';
                        if (progress < 1) requestAnimationFrame(step);
                        else statEl.textContent = target + '%';
                    }
                    requestAnimationFrame(step);
                }
            }

            window.addEventListener('scroll', checkAndAnimate, { passive: true });
            checkAndAnimate();
        })();

        // 38% stat count-up animation when Title 1 section reaches halfway up viewport
        (function() {
            const statEl = document.getElementById('stat-38');
            const section = document.getElementById('supporting-students');
            if (!statEl || !section) return;

            let animated = false;
            const target = 38;
            const duration = 2250;

            function checkAndAnimate() {
                if (animated) return;
                const rect = section.getBoundingClientRect();
                const viewportMid = window.innerHeight / 2;
                if (rect.top <= viewportMid) {
                    animated = true;
                    let start = null;
                    function step(timestamp) {
                        if (!start) start = timestamp;
                        const elapsed = timestamp - start;
                        const progress = Math.min(elapsed / duration, 1);
                        const easeOut = 1 - Math.pow(1 - progress, 2);
                        const value = Math.round(easeOut * target);
                        statEl.textContent = value + '%';
                        if (progress < 1) requestAnimationFrame(step);
                        else statEl.textContent = target + '%';
                    }
                    requestAnimationFrame(step);
                }
            }

            window.addEventListener('scroll', checkAndAnimate, { passive: true });
            checkAndAnimate();
        })();

        // 98% stat count-up animation when Title 1 section reaches halfway up viewport
        (function() {
            const statEl = document.getElementById('stat-98');
            const section = document.getElementById('supporting-students');
            if (!statEl || !section) return;

            let animated = false;
            const target = 98;
            const duration = 2250;

            function checkAndAnimate() {
                if (animated) return;
                const rect = section.getBoundingClientRect();
                const viewportMid = window.innerHeight / 2;
                if (rect.top <= viewportMid) {
                    animated = true;
                    let start = null;
                    function step(timestamp) {
                        if (!start) start = timestamp;
                        const elapsed = timestamp - start;
                        const progress = Math.min(elapsed / duration, 1);
                        const easeOut = 1 - Math.pow(1 - progress, 2);
                        const value = Math.round(easeOut * target);
                        statEl.textContent = value + '%';
                        if (progress < 1) requestAnimationFrame(step);
                        else statEl.textContent = target + '%';
                    }
                    requestAnimationFrame(step);
                }
            }

            window.addEventListener('scroll', checkAndAnimate, { passive: true });
            checkAndAnimate();
        })();

        // Popup notification functionality
        document.addEventListener('DOMContentLoaded', () => {
            const popup = document.getElementById('emailPopup');
            const closeBtn = document.getElementById('closePopup');
            
            // Show popup after a short delay
            setTimeout(() => {
                popup.classList.add('show');
            }, 1000);
            
            // Close popup when X is clicked
            closeBtn.addEventListener('click', () => {
                popup.classList.remove('show');
                popup.classList.add('hide');
            });
        });

        // Smooth scroll and navigation highlighting
        const sections = document.querySelectorAll('.content-section, .hero');
        const navItems = document.querySelectorAll('.nav-item');
        const mobileNavItems = document.querySelectorAll('.mobile-nav-item');

        // Update active nav item on scroll
        window.addEventListener('scroll', () => {
            let current = 'hero';
            const scrollPosition = window.scrollY + window.innerHeight / 2;

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    current = section.getAttribute('id');
                }
            });

            // Update desktop nav
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === current) {
                    item.classList.add('active');
                }
            });

            // Update mobile nav
            mobileNavItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === current) {
                    item.classList.add('active');
                }
            });
        });

        // Desktop navigation click
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const sectionId = item.getAttribute('data-section');
                const section = document.getElementById(sectionId);
                
                if (section) {
                    const headerOffset = 200;
                    const elementPosition = section.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                    window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                }
            });
        });

        // Mobile navigation click
        mobileNavItems.forEach(item => {
            item.addEventListener('click', () => {
                const sectionId = item.getAttribute('data-section');
                const section = document.getElementById(sectionId);
                
                if (section) {
                    const headerOffset = 200;
                    const elementPosition = section.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                    window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                }
            });
        });

        // Housing Development Donut Chart Animation
        (function() {
            const data = [
                { name: 'Park Apartments', units: 414, type: 'Market Rate', color: '#7B1113' },
                { name: 'Greenfield', units: 149, type: 'Affordable', color: '#D32027', affordable: true },
                { name: 'Longleaf Trace', units: 48, type: 'Affordable (Planned)', color: '#F5C518', planned: true, affordable: true },
            ];
            
            const totalWithPlanned = 611;
            const size = 280;
            const strokeWidth = 38;
            const radius = (size - strokeWidth) / 2;
            const circumference = 2 * Math.PI * radius;
            const svg = document.getElementById('housing-donut');
            const centerNumber = document.getElementById('housing-centerNumber');
            const legend = document.getElementById('housing-legend');
            
            if (!svg || !centerNumber || !legend) return;
            
            // Create background circle
            const bgCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            bgCircle.setAttribute('cx', size / 2);
            bgCircle.setAttribute('cy', size / 2);
            bgCircle.setAttribute('r', radius);
            bgCircle.setAttribute('fill', 'none');
            bgCircle.setAttribute('stroke', '#f0f0f0');
            bgCircle.setAttribute('stroke-width', strokeWidth);
            svg.appendChild(bgCircle);
            
            // Create segments
            let currentOffset = 0;
            data.forEach((segment, i) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', size / 2);
                circle.setAttribute('cy', size / 2);
                circle.setAttribute('r', radius);
                circle.setAttribute('fill', 'none');
                circle.setAttribute('stroke', segment.color);
                circle.setAttribute('stroke-width', strokeWidth);
                circle.setAttribute('stroke-linecap', 'round');
                circle.setAttribute('transform', `rotate(-90 ${size/2} ${size/2})`);
                
                const segmentLength = (segment.units / totalWithPlanned) * circumference;
                circle.style.strokeDasharray = `0 ${circumference}`;
                circle.style.strokeDashoffset = -currentOffset;
                circle.style.transition = 'stroke-dasharray 0.8s ease-out';
                circle.dataset.target = segmentLength;
                
                svg.appendChild(circle);
                currentOffset += segmentLength;
            });
            
            // Create legend
            data.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'legend-item';
                div.innerHTML = `
                    <div class="legend-dot" style="background: ${item.color};"></div>
                    <div class="legend-text">
                        <strong>${item.name}</strong> · ${item.units} units${item.affordable ? '<span class="affordable-tag">AFFORDABLE</span>' : ''}${item.planned ? '<span class="planned-tag">PLANNED</span>' : ''}
                    </div>
                `;
                legend.appendChild(div);
                
                setTimeout(() => {
                    div.style.opacity = '1';
                    div.style.transition = 'opacity 0.4s ease-out';
                }, 1800 + i * 150);
            });
            
            // Animate chart when section is visible
            const housingSection = document.getElementById('strategic-location');
            if (!housingSection) return;
            
            let animated = false;
            function checkAndAnimate() {
                if (animated) return;
                const rect = housingSection.getBoundingClientRect();
                const viewportMid = window.innerHeight / 2;
                if (rect.top <= viewportMid) {
                    animated = true;
                    
                    setTimeout(() => {
                        const circles = svg.querySelectorAll('circle:not(:first-child)');
                        circles.forEach((circle, i) => {
                            setTimeout(() => {
                                const target = parseFloat(circle.dataset.target);
                                circle.style.strokeDasharray = `${target} ${circumference}`;
                            }, i * 400);
                        });
                        
                        // Animate center number
                        const duration = 2000;
                        const startTime = Date.now();
                        const animate = () => {
                            const elapsed = Date.now() - startTime;
                            const progress = Math.min(elapsed / duration, 1);
                            const eased = 1 - Math.pow(1 - progress, 3);
                            centerNumber.textContent = Math.round(totalWithPlanned * eased);
                            if (progress < 1) requestAnimationFrame(animate);
                        };
                        animate();
                    }, 800);
                }
            }
            
            window.addEventListener('scroll', checkAndAnimate, { passive: true });
            checkAndAnimate();
        })();

        // Growth Chart Bar Animation
        (function() {
            const schools = [
                { name: 'Ephesus', score: 90.2, isTop: true },
                { name: 'Carrboro', score: 87.5 },
                { name: 'FPG', score: 86.0 },
                { name: 'Glenwood', score: 82.2 },
                { name: 'Seawell', score: 81.1 },
                { name: 'Rashkis', score: 80.5 },
                { name: 'Morris Grove', score: 80.5 },
                { name: 'Northside', score: 80.4 },
                { name: 'Estes Hills', score: 76.7 },
                { name: 'McDougle', score: 76.2 },
                { name: 'Scroggs', score: 73.9 },
            ];

            const container = document.getElementById('growthChartRows');
            const section = document.getElementById('academic-growth');
            
            if (!container || !section) return;

            // Create rows without animation initially
            const rows = [];
            schools.forEach((school, index) => {
                const row = document.createElement('div');
                row.className = 'growth-chart-row' + (school.isTop ? ' top' : '');
                row.style.opacity = '0';
                row.innerHTML = `
                    <span class="growth-school-name">${school.name}</span>
                    <div class="growth-bar-bg"><div class="growth-bar-fill" style="width: 0%"></div></div>
                    <span class="growth-score">${school.score.toFixed(1)}</span>
                `;
                container.appendChild(row);
                rows.push({ row, school, index });
            });

            // Animate when section scrolls into view
            let animated = false;
            function checkAndAnimate() {
                if (animated) return;
                const rect = section.getBoundingClientRect();
                const viewportMid = window.innerHeight / 2;
                if (rect.top <= viewportMid && rect.bottom >= 0) {
                    animated = true;
                    
                    rows.forEach(({ row, school, index }) => {
                        setTimeout(() => {
                            row.style.opacity = '1';
                            row.style.animation = 'fadeUpChart 0.5s ease-out forwards';
                        }, 200 + index * 50);
                        
                        const bar = row.querySelector('.growth-bar-fill');
                        setTimeout(() => {
                            bar.style.width = school.score + '%';
                            bar.style.animation = 'slideInBar 0.8s ease-out forwards';
                        }, 400 + index * 50);

                        if (school.isTop) {
                            setTimeout(() => { bar.classList.add('animated'); }, 1500);
                        }
                    });
                }
            }
            
            window.addEventListener('scroll', checkAndAnimate, { passive: true });
            checkAndAnimate();
        })();
    </script>
</body>
</html>
